# BC-macro 기술 문서

## 1. 경제성 분석 이론적 배경

### 1.1 편익-비용 분석(Benefit-Cost Analysis) 개요

편익-비용 분석은 교통 인프라 투자의 경제적 타당성을 평가하는 방법론으로, 프로젝트로 인한 사회적 편익과 비용을 화폐단위로 환산하여 비교합니다.

**기본 원리**:
- 순현재가치(NPV) = Σ(편익 - 비용) / (1+할인율)^t
- 편익비용비(B/C Ratio) = 총편익 현재가치 / 총비용 현재가치
- 내부수익률(IRR): NPV = 0이 되는 할인율

### 1.2 교통편익의 구성요소

BC-macro에서 계산하는 5가지 주요 편익:

| 편익 유형 | 영문명 | 매크로 속성 | 경제적 의미 |
|-----------|--------|-------------|-------------|
| 시간가치 | Value of Travel Time Saving | @vots | 통행시간 단축의 경제적 가치 |
| 차량운행비용 | Vehicle Operating Cost Saving | @vocs | 연료비, 유지비 등 절약 |
| 교통사고비용 | Vehicle Incident Cost Saving | @vics | 사고 감소로 인한 사회적 편익 |
| 대기오염비용 | Valuation of Pollution Cost Saving | @vopcs | 배출가스 감소의 환경편익 |
| 소음비용 | Valuation of Noise Cost Saving | @voncs | 교통소음 감소의 환경편익 |

## 2. 수학적 모델링

### 2.1 차량운행비용 모델

**기본 공식**:
```
VOCS_link = Σ[i=1 to 5] (f_i(v) × L × Q_i × r_i) × 365 / 10^8
```

여기서:
- f_i(v): 차종 i의 속도-운행비용 함수 (4차 다항식)
- L: 링크 길이 (km)
- Q_i: 차종 i의 교통량 (대/시간)
- r_i: 차종 i의 구성비
- 365: 연간일수
- 10^8: 억원 단위 환산

**속도-운행비용 함수 (차종별)**:

승용차(i=1):
```
f_1(v) = 0.00000492×v⁴ - 0.00174193×v³ + 0.25106799×v² - 17.78182586×v + 765.13001217
```

버스(i=2):
```
f_2(v) = 0.00001393×v⁴ - 0.00441911×v³ + 0.57815961×v² - 36.56152235×v + 1384.340464
```

화물차 함수도 유사한 4차 다항식 형태로 구성됩니다.

### 2.2 시간가치 모델

**기본 공식**:
```
VOTS_link = (T/60) × Q × VOT × 365 / 10^8
```

여기서:
- T: 통행시간 (분)
- Q: 교통량 (대/시간)
- VOT: 시간가치 (원/시간)

**차종별 시간가치 (2024년 KDI 기준)**:
- 승용차: 23,319원/시간
- 버스: 191,626원/시간
- 화물차: 27,809원/시간

### 2.3 교통사고비용 모델

**기본 공식**:
```
VICS_link = ACC_rate × Q × L × 365 / 10^8
```

**도로등급별 사고원단위**:
- 고속도로: 19.7765788704원/(대·km)
- 국도: 58.9577610072원/(대·km)
- 지방도: 153.7349595012원/(대·km)

### 2.4 대기오염비용 모델

**기본 공식**:
```
VOPCS_link = Σ[i=1 to 5] (g_i(v) × L × Q_i × r_i) × 365 / 10^8
```

**배출계수 함수 (차종별, 예: 승용차)**:
```
g_1(v) = 0.00000206×v⁴ - 0.00055413×v³ + 0.05480821×v² - 2.47832703×v + 59.0643625
```

### 2.5 소음비용 모델

**음향파워레벨 계산**:
```
PWL = 72.4 + 20×log₁₀(v) + 10×log₁₀((r₁+r₃) + 3.8×(1-r₁-r₃))
```

**등가소음도 계산**:

고속도로:
```
Leq₁ = PWL + 10×log₁₀(1/(111.6×(1000×v/Q)))
```

일반도로:
```
Leq₂ = 1.1×(20 + 10×log₁₀(Q×v/16.1) - 9×log₁₀(2.2) + C₁)
```

**소음비용**:
```
VONCS_link = L × (Leq₁ + Leq₂) × 2,859 × 365 / 10^8
```

## 3. 교통배정 모델

### 3.1 다차종 교통배정

BC-macro는 5가지 차종에 대한 동시 배정을 수행합니다:

1. 승용차 (일반)
2. 버스
3. 소형화물차
4. 중형화물차  
5. 대형화물차

**PCU (Passenger Car Unit) 환산**:
- 승용차: 1.0
- 버스: 2.0
- 소형화물차: 1.3
- 중형화물차: 3.75
- 대형화물차: 2.0 (특수)

### 3.2 시간대별 배정

**첨두시간 (Peak Hour)**:
- 지속시간: 5시간
- 교통량 집중도: 높음
- 혼잡도: 높음

**비첨두시간 (Off-Peak)**:
- 지속시간: 14시간  
- 교통량 집중도: 낮음
- 혼잡도: 낮음

**일교통량 환산**:
```
Daily_Volume = (Peak_Volume × 5 + Off-Peak_Volume × 14) / 0.9856
```

### 3.3 수렴 기준

**상대갭 (Relative Gap)**:
```
RG = (TSTT_UE - TSTT_AON) / TSTT_UE < 0.000001
```

여기서:
- TSTT_UE: User Equilibrium 총통행시간
- TSTT_AON: All-or-Nothing 총통행시간

## 4. 데이터 구조

### 4.1 네트워크 속성

**필수 링크 속성**:
- length: 링크 길이 (km)
- vdf: Volume-Delay Function 번호
- ul1: 링크 용량 (대/시간)
- timau: 자유속도 통행시간 (분)

**생성되는 속성**:
- @vol1~@vol5: 차종별 교통량
- @ptota/@ntota: 시간대별 총 교통량
- @ptimea/@ntimea: 시간대별 통행시간

### 4.2 매트릭스 구조

**통행수요 매트릭스**:
- mf51~55: 첨두시간 차종별 O-D
- mf56~60: 비첨두시간 차종별 O-D

### 4.3 결과 출력 형식

**링크별 편익 (Link-based Benefits)**:
```
Link_ID, Length, Volume, VOTS, VOCS, VICS, VOPCS, VONCS, Total_Benefit
```

**총편익 집계 (Aggregated Benefits)**:
```
Scenario, Year, VOTS_Total, VOCS_Total, VICS_Total, VOPCS_Total, VONCS_Total, Grand_Total
```

## 5. 정확도 및 한계점

### 5.1 모델의 정확도

**강점**:
- 한국 실정에 맞는 원단위 적용
- 차종별 세분화된 분석
- 시간대별 정밀 분석

**한계점**:
- 정적 분석 (동적 효과 미반영)
- 유발교통량 효과 제한적 반영
- 간접편익 (개발유발 등) 미포함

### 5.2 불확실성 요인

**매개변수 불확실성**:
- 시간가치의 소득탄력성
- 차종별 구성비 변화
- 기술발전에 따른 운행비용 변화

**모델 불확실성**:
- 교통배정 모델의 수렴성
- VDF 함수의 적합성
- 네트워크 코딩의 정확성

## 6. 품질관리 방안

### 6.1 결과 검증

**논리적 검증**:
- 편익 부호의 적절성
- 규모의 합리성
- 시나리오 간 일관성

**수치적 검증**:
- 교통량 보존 확인
- 수렴성 확인
- 극값 검토

### 6.2 민감도 분석

**핵심 매개변수**:
- 시간가치 ±20%
- 교통량 ±10%
- 할인율 ±1%

**시나리오 분석**:
- 교통수요 증가율 변동
- 연료가격 변동
- 기술발전 시나리오

이러한 기술적 배경을 이해하고 활용하면 BC-macro를 통해 보다 정확하고 신뢰성 있는 경제성 분석을 수행할 수 있습니다.